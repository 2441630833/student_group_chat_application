{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/24416/Downloads/project and dissetation/student-study-group-chat-application/front-end chat/pages/chatroom/chatroom.vue?ec25","webpack:///C:/Users/24416/Downloads/project and dissetation/student-study-group-chat-application/front-end chat/pages/chatroom/chatroom.vue?0f04","webpack:///C:/Users/24416/Downloads/project and dissetation/student-study-group-chat-application/front-end chat/pages/chatroom/chatroom.vue?f281","webpack:///C:/Users/24416/Downloads/project and dissetation/student-study-group-chat-application/front-end chat/pages/chatroom/chatroom.vue?9a0b","uni-app:///pages/chatroom/chatroom.vue","webpack:///C:/Users/24416/Downloads/project and dissetation/student-study-group-chat-application/front-end chat/pages/chatroom/chatroom.vue?70c6","webpack:///C:/Users/24416/Downloads/project and dissetation/student-study-group-chat-application/front-end chat/pages/chatroom/chatroom.vue?ddca"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","roomID","chatm","name","uname","id","friendID","userID","friendID2","userID2","img","chat","member","animationData","bb","bg","users","otochat","groupChatMessages","singlechat","emojis","isShowEmoji","cursorFocus","scrollHeight","computed","onLoad","methods","getCursorFocus","inputDialogToggle","uni","url","method","success","title","icon","fail","console","scrollToBottom","scrollTop","duration","singleChatScrollToBottom","singleChatInitializeToBottom","insertText","showEmoji","gptUpload","key","quitRoom","disconnect","timeProcess","h","m","time","M","D","sendMsg","messageContent","senderID","fromID","toID","fromID2","toID2","saveChatToDB","join","welcome","myself","quit","receiveGroupMsg","receiveAIMsg","receiveSingleMsg","singleChat","outSingleChat","modify","timingFunction","animation","fetchGroupChatMessages","fetchSingleChatMessages"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,iBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACc;;;AAGrE;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,+PAEN;AACP,KAAK;AACL;AACA,aAAa,+VAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7EA;AAAA;AAAA;AAAA;AAAuzB,CAAgB,syBAAG,EAAC,C;;;;;;;;;;;;;;;;;;ACqI30B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;EAAA,CACA;EAEAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MAAA;MACAC;QACAC;QACAC;QACA/B;UACAK;QACA;QACA2B;UACA;YACAH;cACAC;YACA;UACA;YACA;cACAD;gBACAI;gBACAC;cACA;YACA,OACA;cACA;YACA;UACA;QACA;QACAC;UACAC;QACA;MACA;IACA;IACA;IACAC;MACA;QACAR;UACAS;UACAC;QACA;MACA;IACA;IACAC;MAAA;MACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACAf;QACAC;QACAC;QACA/B;UACAK;UACAwC;QACA;QACAb;UACA;YACAH;cACAC;YACA;UACA;YAEAD;cACAI;cACAC;YACA;UACA;QACA;QACAC;UACAC;QACA;MACA;IACA;IACAU;MACA;QAAAzC;QAAAF;QAAAF;MAAA;MACA;IACA;IACA8C;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;QACA;UACAC;QACA;QACA;UACAC;QACA;QACAC;QACA;MACA;QACA;UACAF;QACA;QACA;UACAC;QACA;QACAC;QACA;MACA;QACA;UACAC;QACA;QACA;UACAC;QACA;QACA;UACAJ;QACA;QACA;UACAC;QACA;QACAC;QACA;MACA;IACA;IACA;IACAG;MACA;QACA;UACArD;UACAsD;UACA7C;UACAyC;UACA9C;UACAmD;QACA;QACA;UACAvD;UACAsD;UACA7C;UACAP;UACAgD;UACA9C;UACAmD;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MAEA;QACA;QACA;UACAvD;UACAsD;UACA7C;UACAyC;UACAM;UACAC;UACAC;UACAC;QACA;QACA;UACA3D;UACAsD;UACA7C;UACAP;UACAgD;UACAM;UACAC;UACAC;UACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACA;IACA;IACA;IACAC;MACAhC;QACAC;QAAA;QACA9B;QACA+B;QACAC;UACA;YACA;UAAA;QAEA;QACAG;UACAC;QACA;MACA;IACA;IACA;IACA0B;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;QACA;QACA;UACA5D;UACAE;QACA;QACA;QACA;QAEA;UACA;YACAW;UACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAgD;MAAA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;UACA7D;UACAE;QACA;QACA;QACA;QAEA;UACA;YACAW;UACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAiD;MAAA;MACA;MACA;QACA;QACA;UACA9D;UACAE;QACA;QACA;QACA;;QAEA;QACA;QACA;MACA;IACA;IACA;IACA6D;MAAA;MACA;MACA;QACA;QACA;QACA;QACA;MACA;IAEA;IACA;IACAC;MAAA;MACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;QACA;UACA;YACA;cACA;YACA;UACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;MACA;QACA;MACA;MACA;QACAhC;QACAiC;MACA;MACA;MACA;QACAC;MAEA;QACAA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA7C;QACAC;QACAC;QACAC;UACA;UACA;QACA;;QACAG;UACAC;QACA;MACA;IACA;IACAuC;MAAA;MACA9C;QACAC;QACAC;QACAC;UACA;QACA;QACAG;UACAC;QACA;MACA;IACA,EACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC3lBA;AAAA;AAAA;AAAA;AAA0gD,CAAgB,q6CAAG,EAAC,C;;;;;;;;;;;ACA9hD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/chatroom/chatroom.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/chatroom/chatroom.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chatroom.vue?vue&type=template&id=4748afe6&\"\nvar renderjs\nimport script from \"./chatroom.vue?vue&type=script&lang=js&\"\nexport * from \"./chatroom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chatroom.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chatroom/chatroom.vue\"\nexport default component.exports","export * from \"-!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=template&id=4748afe6&\"","var components\ntry {\n  components = {\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    uniPopupDialog: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog\" */ \"@/uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. ÊéíÊü•ÁªÑ‰ª∂ÂêçÁß∞ÊãºÂÜôÊòØÂê¶Ê≠£Á°Æ\")\n    console.error(\n      \"2. ÊéíÊü•ÁªÑ‰ª∂ÊòØÂê¶Á¨¶Âêà easycom ËßÑËåÉÔºåÊñáÊ°£Ôºöhttps://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. Ëã•ÁªÑ‰ª∂‰∏çÁ¨¶Âêà easycom ËßÑËåÉÔºåÈúÄÊâãÂä®ÂºïÂÖ•ÔºåÂπ∂Âú® components ‰∏≠Ê≥®ÂÜåËØ•ÁªÑ‰ª∂\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.groupChatMessages, function (e, index) {\n    var $orig = _vm.__get_orig(e)\n    var m0 = e.id == 1 && e.senderID != _vm.id ? _vm.timeProcess(e.time) : null\n    var m1 = e.id == 2 || e.senderID == _vm.id ? _vm.timeProcess(e.time) : null\n    var m2 = e.id == 4 ? _vm.timeProcess(e.time) : null\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1,\n      m2: m2,\n    }\n  })\n  var l1 = _vm.__map(_vm.singlechat, function (e, index) {\n    var $orig = _vm.__get_orig(e)\n    var m3 =\n      (e.fromID == _vm.friendID || e.fromID2 == _vm.friendID2) &&\n      e.fromID2 != e.toID2\n        ? _vm.timeProcess(e.time)\n        : null\n    var m4 =\n      (e.fromID == _vm.userID && e.toID == _vm.friendID) ||\n      (e.fromID2 == _vm.userID2 && e.toID2 == _vm.friendID2)\n        ? _vm.timeProcess(e.time)\n        : null\n    return {\n      $orig: $orig,\n      m3: m3,\n      m4: m4,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<!-- status judgement -->\r\n\t\t<view class=\"status-bar\">\r\n\t\t\t<!-- quit group chat and back to index page -->\r\n\t\t\t<navigator open-type=\"navigateBack\" class=\"login-c\" hover-class=\"none\" @tap=\"quitRoom\">\r\n\t\t\t\t<image src=\"../../static/back.png\" class=\"login-back\"></image>\r\n\t\t\t</navigator>\r\n\t\t\t<!-- quit the chatroom -->\r\n\t\t\t<!-- <view class=\"login-c\">\r\n\t\t\t\t<image src=\"../../static/back.png\" class=\"login-back\" @tap=\"backToIndex\"></image>\r\n\t\t\t</view> -->\r\n\t\t\t<!-- scroll bar -->\r\n\t\t\t<scroll-view scroll-x=\"true\" class=\"scrollv\">\r\n\t\t\t\t<view class=\"users\">\r\n\t\t\t\t\t<view v-for=\"(e, index) in users\" v-if=\"e.roomID == roomID\" class=\"user-l\" @tap=\"singleChat(index)\">\r\n\t\t\t\t\t\t<view class=\"tip\" v-if=\"e.tip\"></view>\r\n\t\t\t\t\t\t<image :src=\"'../../static/images/' + e.img + '.png'\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t\t<!-- main content -->\r\n\t\t<view class=\"main\" ref=\"chatContainer\">\r\n\t\t\t<view v-for=\"(e, index) in groupChatMessages\" :key=\"index\">\r\n\t\t\t\t<!-- left message -->\r\n\t\t\t\t<view class=\"left msg\" v-if=\"e.id == 1 && e.senderID != id\">\r\n\t\t\t\t\t<image :src=\"'../../static/images/' + e.img + '.png'\"></image>\r\n\t\t\t\t\t<view class=\"messageOverall\">\r\n\t\t\t\t\t\t<view class=\"messageContent\">\r\n\t\t\t\t\t\t\t{{ e.messageContent }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"messageTime\">{{ e.name }} {{ timeProcess(e.time) }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- right message -->\r\n\t\t\t\t<view class=\"right msg\" v-if=\"e.id == 2 || e.senderID == id\">\r\n\t\t\t\t\t<image :src=\"'../../static/images/' + e.img + '.png'\"></image>\r\n\t\t\t\t\t<view class=\"messageOverall\">\r\n\t\t\t\t\t\t<view class=\"messageContent\">\r\n\t\t\t\t\t\t\t{{ e.messageContent }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"messageTime\">{{ timeProcess(e.time) }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- center welcome message -->\r\n\t\t\t\t<view class=\"center\" v-if=\"e.id == 3\">\r\n\t\t\t\t\t<view class=\"inner\">{{ e.name }}</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- AI message -->\r\n\t\t\t\t<view class=\"left msg\" v-if=\"e.id == 4\">\r\n\t\t\t\t\t<image src=\"../../static/chatGPT.png\"></image>\r\n\t\t\t\t\t<view class=\"messageOverall\">\r\n\t\t\t\t\t\t<view class=\"messageContent\">\r\n\t\t\t\t\t\t\t{{ e.messageContent }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"messageTime\"> {{ timeProcess(e.time) }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- AI message -->\r\n\t\t\t<!-- <view v-for=\"element in chatGPTmsg\" :key=\"element\" class=\"left msg\">\r\n\t\t\t\t<view class=\"messageOverall\">\r\n\t\t\t\t\t<view class=\"messageContent\">\r\n\t\t\t\t\t\t{{ element }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view> -->\r\n\t\t</view>\r\n\r\n\t\t<view class=\"send\">\r\n\t\t\t<view class=\"send-in\">\r\n\t\t\t\t<!-- emoji -->\r\n\t\t\t\t<div v-show=\"isShowEmoji\" class=\"emoji-display\">\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li @click=\"insertText(emoji)\" v-for=\"emoji of emojis\">{{ emoji }}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- <div class=\"emoji\">\r\n\t\t\t\t\t<i @click=\"showEmoji(isShowEmoji = !isShowEmoji);\" class=\"icon-emoji\"></i>\r\n\t\t\t\t</div> -->\r\n\t\t\t\t<image src=\"../../static/emoji.png\" mode=\"aspectFit\" @tap=\"showEmoji(isShowEmoji)\" class=\"emoji-img\">\r\n\t\t\t\t</image>\r\n\t\t\t\t<image src=\"../../static/chatGPT.png\" mode=\"aspectFit\" @click=\"inputDialogToggle\" class=\"gpt-img\"\r\n\t\t\t\t\tv-if='!friendID'></image>\r\n\t\t\t\t<textarea type=\"text\" confirm-type=\"send\" class=\"chat-send\" v-model=\"chatm\" auto-height=\"true\"\r\n\t\t\t\t\tshow-confirm-bar=\"false\" maxlength=\"-1\" :focus=cursorFocus @keyup.enter=\"sendMsg\"\r\n\t\t\t\t\t@blur=\"getCursorFocus\"></textarea>\r\n\t\t\t</view>\r\n\r\n\t\t\t<image src=\"../../static/send.png\" mode=\"aspectFit\" @tap=\"sendMsg\" class=\"send-img\"></image>\r\n\t\t</view>\r\n\t\t<!-- one to one chat -->\r\n\t\t<view class=\"modify\" :animation=\"animationData\">\r\n\t\t\t<view class=\"u-name\">\r\n\t\t\t\t{{ uname }}\r\n\t\t\t</view>\r\n\t\t\t<scroll-view class=\"modfiy-mian\" scroll-y=\"true\" :scroll-top = \"scrollHeight\">\r\n\t\t\t\t<view v-for=\"(e, index) in singlechat\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"left msg\" v-if=\"(e.fromID == friendID || e.fromID2 == friendID2) && e.fromID2 != e.toID2\">\r\n\t\t\t\t\t\t<image :src=\"'../../static/images/' + e.img + '.png'\"></image>\r\n\t\t\t\t\t\t<view class=\"messageOverall\">\r\n\t\t\t\t\t\t\t<view class=\"messageContent\">\r\n\t\t\t\t\t\t\t\t{{ e.messageContent }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"messageTime\">{{ timeProcess(e.time) }}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"right msg\" v-if=\"(e.fromID == userID && e.toID == friendID) || (e.fromID2 == userID2 && e.toID2 == friendID2)\">\r\n\t\t\t\t\t\t<image :src=\"'../../static/images/' + e.img + '.png'\"></image>\r\n\t\t\t\t\t\t<view class=\"messageOverall\">\r\n\t\t\t\t\t\t\t<view class=\"messageContent\">\r\n\t\t\t\t\t\t\t\t{{ e.messageContent }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"messageTime\">{{ timeProcess(e.time) }}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- <view class=\"center\" v-if=\"e.id == 3\">\r\n\t\t\t\t\t\t<view class=\"inner\">{{ e.name }}</view>\r\n\t\t\t\t\t</view> -->\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t\t<view class=\"bg\" @tap=\"outSingleChat\" :style=\"{ display: bg }\"></view>\r\n\t\t<uni-popup ref=\"inputDialog\" type=\"dialog\">\r\n\t\t\t<uni-popup-dialog ref=\"inputClose\" mode=\"input\" title=\"Encryption key\" value=\"\"\r\n\t\t\t\tplaceholder=\"please input the encryption key\" @confirm=\"gptUpload\"></uni-popup-dialog>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { BASE_URL, SERVER_PORT } from '../../config.js';\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\troomID: '',\t //room id\r\n\t\t\tchatm: '',\t\t\t//message content\r\n\t\t\tname: '',\t\t\t//users name\r\n\t\t\tuname: '',\r\n\t\t\tid: '',\t\t\t\t//users id\r\n\t\t\tfriendID: '',\r\n\t\t\tuserID: 'a',\r\n\t\t\tfriendID2: '',\r\n\t\t\tuserID2: '',\r\n\t\t\timg: '',\t\t\t\t//uses img\r\n\t\t\tchat: [],\t\t\t//chat content \r\n\t\t\tmember: 0,\t\t\t//member number\r\n\t\t\tanimationData: {},\r\n\t\t\tbb: false,\r\n\t\t\tbg: 'none',\r\n\t\t\tusers: '',\r\n\t\t\totochat: [],\r\n\t\t\tgroupChatMessages: [],\r\n\t\t\tsinglechat: [],\r\n\t\t\temojis: ['üòÇ', 'üôè', 'üòÑ', 'üòè', 'üòá', 'üòÖ', 'üòå', 'üòò', 'üòç', 'ü§ì', 'üòú', 'üòé', 'üòä', 'üò≥', 'üôÑ', 'üò±', 'üòí', 'üòî', 'üò∑', 'üëø', 'ü§ó', 'üò©', 'üò§', 'üò£', 'üò∞', 'üò¥', 'üò¨', 'üò≠', 'üëª', 'üëç', '‚úåÔ∏è', 'üëâ', 'üëÄ', 'üê∂', 'üê∑', 'üòπ', '‚ö°Ô∏è', 'üî•', 'üåà', 'üçè', '‚öΩÔ∏è', '‚ù§Ô∏è'],\r\n\t\t\tisShowEmoji: false,\r\n\t\t\tcursorFocus: true,\r\n\t\t\tscrollHeight: 0,\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t// filteredMessages() {\r\n\t\t//   return this.groupChatMessages.filter(message => message.roomID === this.roomID);\r\n\t\t// }\r\n\t},\r\n\r\n\tonLoad(e) {\r\n\t\tthis.name = e.name;\r\n\t\tthis.img = e.img;\r\n\t\tthis.id = e.id;\r\n\t\tthis.roomID = e.roomID;\r\n\t\tthis.join(this.name, this.img, this.id, this.roomID);\r\n\t\tthis.welcome();\r\n\t\tthis.myself();\r\n\t\tthis.receiveGroupMsg();\r\n\t\tthis.receiveAIMsg();\r\n\t\tthis.receiveSingleMsg();\r\n\t\tthis.quit();\r\n\t\tthis.fetchGroupChatMessages();\r\n\t\tthis.fetchSingleChatMessages();\r\n\t\tthis.scrollToBottom();\r\n\t},\r\n\tmethods: {\r\n\t\tgetCursorFocus() {\r\n\t\t\tthis.cursorFocus = false;\r\n\t\t},\r\n\t\tinputDialogToggle() {\r\n\t\t\tuni.request({\r\n\t\t\t\turl: BASE_URL + ':' + SERVER_PORT + `/membershipVerify`,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tid: this.id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '../upload/upload?roomID=' + this.roomID,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (res.statusCode === 400 || res.statusCode === 404) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.data.message,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tthis.$refs.inputDialog.open();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//make page scroll to the bottom\r\n\t\tscrollToBottom() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\tscrollTop: 9999999999999999,\r\n\t\t\t\t\tduration: 100\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tsingleChatScrollToBottom() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.scrollHeight  += 200;\r\n\t\t\t});\r\n\t\t},\r\n\t\tsingleChatInitializeToBottom() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.scrollHeight  += 20000000;\r\n\t\t\t});\r\n\t\t},\r\n\t\t// insert emoji\r\n\t\tinsertText(emoji) {\r\n\t\t\tthis.chatm += emoji;\r\n\t\t\tthis.isShowEmoji = false;\r\n\t\t},\r\n\t\t// show emoji\r\n\t\tshowEmoji(flag) {\r\n\t\t\tthis.isShowEmoji = !flag;\r\n\t\t},\r\n\t\tgptUpload(value) {\r\n\t\t\tuni.request({\r\n\t\t\t\turl: BASE_URL + ':' + SERVER_PORT + `/gptVerify`,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tid: this.id,\r\n\t\t\t\t\tkey: value,\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '../upload/upload?roomID=' + this.roomID,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.message,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tquitRoom() {\r\n\t\t\tthis.socket.emit('quitRoom', { id: this.id, name: this.name, roomID: this.roomID });\r\n\t\t\tthis.socket.emit('updateTipStatus', this.roomID);\r\n\t\t},\r\n\t\tdisconnect() {\r\n\t\t\tthis.socket.disconnect();\r\n\t\t},\r\n\t\ttimeProcess(date) {\r\n\t\t\tvar time;\r\n\t\t\tvar d = new Date(date);\r\n\t\t\tvar n = new Date();\r\n\t\t\t//get time\r\n\t\t\tvar dd = d.getTime();\r\n\t\t\tvar h = d.getHours();\r\n\t\t\tvar m = d.getMinutes();\r\n\t\t\tvar Y = d.getFullYear();\r\n\t\t\tvar M = d.getMonth() + 1;\r\n\t\t\tvar D = d.getDate();\r\n\t\t\t//current time\r\n\t\t\tvar nn = n.getTime();\r\n\t\t\tvar hh = n.getHours();\r\n\t\t\tvar mm = n.getMinutes();\r\n\t\t\tvar YY = n.getFullYear();\r\n\t\t\tvar MM = n.getMonth() + 1;\r\n\t\t\tvar DD = n.getDate();\r\n\r\n\t\t\tif (D == DD && M == MM && Y == YY) {\r\n\t\t\t\tif (h < 10) {\r\n\t\t\t\t\th = '0' + h;\r\n\t\t\t\t}\r\n\t\t\t\tif (m < 10) {\r\n\t\t\t\t\tm = '0' + m;\r\n\t\t\t\t}\r\n\t\t\t\ttime = h + ':' + m;\r\n\t\t\t\treturn time;\r\n\t\t\t} else if (D + 1 == DD && M == MM && Y == YY) {\r\n\t\t\t\tif (h < 10) {\r\n\t\t\t\t\th = '0' + h;\r\n\t\t\t\t}\r\n\t\t\t\tif (m < 10) {\r\n\t\t\t\t\tm = '0' + m;\r\n\t\t\t\t}\r\n\t\t\t\ttime = 'yesterday' + ' ' + h + ':' + m;\r\n\t\t\t\treturn time;\r\n\t\t\t} else {\r\n\t\t\t\tif (M < 10) {\r\n\t\t\t\t\tM = '0' + M;\r\n\t\t\t\t}\r\n\t\t\t\tif (D < 10) {\r\n\t\t\t\t\tD = '0' + D;\r\n\t\t\t\t}\r\n\t\t\t\tif (h < 10) {\r\n\t\t\t\t\th = '0' + h;\r\n\t\t\t\t}\r\n\t\t\t\tif (m < 10) {\r\n\t\t\t\t\tm = '0' + m;\r\n\t\t\t\t}\r\n\t\t\t\ttime = Y + '/' + M + '/' + D + ' ' + h + ':' + m;\r\n\t\t\t\treturn time;\r\n\t\t\t}\r\n\t\t},\r\n\t\t//send message\r\n\t\tsendMsg() {\r\n\t\t\tif (this.chatm.length > 0 && this.friendID == '') {\r\n\t\t\t\tlet onemsg = {\r\n\t\t\t\t\troomID: this.roomID,\r\n\t\t\t\t\tmessageContent: this.chatm,\r\n\t\t\t\t\timg: this.img,\r\n\t\t\t\t\ttime: new Date(),\r\n\t\t\t\t\tid: 2,\r\n\t\t\t\t\tsenderID: this.id,\r\n\t\t\t\t}\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\troomID: this.roomID,\r\n\t\t\t\t\tmessageContent: this.chatm,\r\n\t\t\t\t\timg: this.img,\r\n\t\t\t\t\tname: this.name,\r\n\t\t\t\t\ttime: new Date(),\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\tsenderID: this.id,\r\n\t\t\t\t}\r\n\t\t\t\t// this.chat.push(onemsg);\r\n\t\t\t\tthis.groupChatMessages.push(onemsg);\r\n\t\t\t\tthis.chatm = '';//clear\r\n\t\t\t\tthis.cursorFocus = true;\r\n\t\t\t\tthis.socket.emit('message', data);\r\n\t\t\t\t// storage in MongoDB\r\n\t\t\t\tthis.saveChatToDB(data, '/groupchat'); // saving to MongoDB\r\n\r\n\t\t\t} else if (this.chatm.length > 0 && this.friendID != '') {\r\n\t\t\t\t//one to one chat\r\n\t\t\t\tlet onemsg = {\r\n\t\t\t\t\troomID: this.roomID,\r\n\t\t\t\t\tmessageContent: this.chatm,\r\n\t\t\t\t\timg: this.img,\r\n\t\t\t\t\ttime: new Date(),\r\n\t\t\t\t\tfromID: this.userID,\r\n\t\t\t\t\ttoID: this.friendID,\r\n\t\t\t\t\tfromID2: this.userID2,\r\n\t\t\t\t\ttoID2: this.friendID2,\r\n\t\t\t\t}\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\troomID: this.roomID,\r\n\t\t\t\t\tmessageContent: this.chatm,\r\n\t\t\t\t\timg: this.img,\r\n\t\t\t\t\tname: this.name,\r\n\t\t\t\t\ttime: new Date(),\r\n\t\t\t\t\tfromID: this.userID,\r\n\t\t\t\t\ttoID: this.friendID,\r\n\t\t\t\t\tfromID2: this.userID2,\r\n\t\t\t\t\ttoID2: this.friendID2,\r\n\t\t\t\t}\r\n\t\t\t\t// this.otochat.push(onemsg);\r\n\t\t\t\tthis.singlechat.push(onemsg);\r\n\t\t\t\tthis.chatm = '';//clear chat message\r\n\t\t\t\tthis.cursorFocus = true;\r\n\t\t\t\tthis.socket.emit('msg', data);\r\n\t\t\t\t// storage in MongoDB\r\n\t\t\t\tthis.saveChatToDB(data, '/singlechat');\r\n\t\t\t\tthis.singleChatScrollToBottom();\r\n\t\t\t}\r\n\t\t\tthis.scrollToBottom();\r\n\t\t},\r\n\t\t// save chat data to MongoDB\r\n\t\tsaveChatToDB(chatData, url) {\r\n\t\t\tuni.request({\r\n\t\t\t\turl: BASE_URL + ':' + SERVER_PORT + url, // replace with your backend server url\r\n\t\t\t\tdata: chatData,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode == 200) {\r\n\t\t\t\t\t\t// console.log('Chat data saved successfully!');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.error('Failed to save chat data: ' + err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//join the group\r\n\t\tjoin: function (name, img, id, roomID) {\r\n\t\t\tthis.socket.emit('join', name, img, id, roomID);\r\n\t\t},\r\n\t\t//welcome joining\r\n\t\twelcome() {\r\n\t\t\t//get the instant message socket\r\n\t\t\tthis.socket.on('welcome', (name, users) => {\r\n\t\t\t\t// console.log(data)\r\n\t\t\t\t// console.log('num'+len)\r\n\t\t\t\t//insert the welcome message\r\n\t\t\t\tlet wel = {\r\n\t\t\t\t\tname: 'welcome ' + name + ' join the group chat',\r\n\t\t\t\t\tid: 3,\r\n\t\t\t\t}\r\n\t\t\t\t// this.chat.push(wel);\r\n\t\t\t\tthis.groupChatMessages.push(wel);\r\n\r\n\t\t\t\tfor (var i = 0; i < users.length; i++) {\r\n\t\t\t\t\tif (users[i].id == this.userID) {\r\n\t\t\t\t\t\tusers.splice(i, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.users = users;\r\n\t\t\t\t// scroll to bottom automatically\r\n\t\t\t\tthis.scrollToBottom();\r\n\t\t\t\t// console.log(this.users)\r\n\t\t\t})\r\n\t\t},\r\n\t\t//get the message from myself\r\n\t\tmyself() {\r\n\t\t\t//get the instant message\r\n\t\t\tthis.socket.on('myself', (name, users, id, userID2) => {\r\n\t\t\t\t// console.log(data)\r\n\t\t\t\t// console.log('num'+len)\r\n\t\t\t\t//insert the welcome message\r\n\t\t\t\tthis.userID = id;\r\n\t\t\t\tthis.userID2 = userID2;\r\n\t\t\t\t// console.log(this.userID);\r\n\t\t\t\tlet myWel = {\r\n\t\t\t\t\tname: 'welcome ' + name + ' join the group chat',\r\n\t\t\t\t\tid: 3,\r\n\t\t\t\t}\r\n\t\t\t\t// this.chat.push(myWel);\r\n\t\t\t\tthis.groupChatMessages.push(myWel);\r\n\r\n\t\t\t\tfor (var i = 0; i < users.length; i++) {\r\n\t\t\t\t\tif (users[i].id == this.userID) {\r\n\t\t\t\t\t\tusers.splice(i, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.users = users;\r\n\t\t\t\t// scroll to bottom automatically\r\n\t\t\t\tthis.scrollToBottom();\r\n\t\t\t\t// console.log(this.users)\r\n\t\t\t})\r\n\t\t},\r\n\t\t//quit the group message\r\n\t\tquit() {\r\n\t\t\t//get the instant message from socket\r\n\t\t\tthis.socket.on('quit', (data) => {\r\n\t\t\t\t//insert the quit message\r\n\t\t\t\tlet quit = {\r\n\t\t\t\t\tname: data.name + ' quit the group chat',\r\n\t\t\t\t\tid: 3,\r\n\t\t\t\t}\r\n\t\t\t\t// this.chat.push(quit);\r\n\t\t\t\tthis.groupChatMessages.push(quit);\r\n\r\n\t\t\t\t//this.member = len;\r\n\t\t\t\tthis.users = data.users;\r\n\t\t\t\t// console.log(data.users)\r\n\t\t\t})\r\n\t\t},\r\n\t\t//\r\n\t\treceiveGroupMsg() {\r\n\t\t\t//get the instant message from socket\r\n\t\t\tthis.socket.on('sendMsg', data => {\r\n\t\t\t\t// this.chat.push(data);\r\n\t\t\t\tthis.groupChatMessages.push(data);\r\n\t\t\t\t// scroll to bottom automatically\r\n\t\t\t\tthis.scrollToBottom();\r\n\t\t\t})\r\n\r\n\t\t},\r\n\t\t// recieve the AI message\r\n\t\treceiveAIMsg() {\r\n\t\t\tthis.socket.on(\"sumbitAIMsg\", (AIMsg) => {\r\n\t\t\t\t// this.chat.push(AIMsg);\r\n\t\t\t\tthis.groupChatMessages.push(AIMsg);\r\n\t\t\t\t// scroll to bottom automatically\r\n\t\t\t\tthis.scrollToBottom();\r\n\t\t\t});\r\n\t\t},\r\n\t\t//receive the one to one message\r\n\t\treceiveSingleMsg() {\r\n\t\t\tthis.socket.on('sMsg', data => {\r\n\t\t\t\tlet fromID = data.fromID;\r\n\t\t\t\tif (this.friendID != fromID) {\r\n\t\t\t\t\tfor (var i = 0; i < this.users.length; i++) {\r\n\t\t\t\t\t\tif (this.users[i].id == fromID) {\r\n\t\t\t\t\t\t\tthis.users[i].tip = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//console.log(data);\r\n\t\t\t\t// this.otochat.push(data);\r\n\t\t\t\tthis.singlechat.push(data);\r\n\t\t\t\tthis.singleChatScrollToBottom();\r\n\t\t\t})\r\n\t\t},\r\n\t\t//come into the one to one chatroom\r\n\t\tsingleChat(e) {\r\n\t\t\tthis.uname = this.users[e].name;\r\n\t\t\tthis.friendID = this.users[e].id;\r\n\t\t\tthis.friendID2 = this.users[e].userID2;\r\n\t\t\tthis.users[e].tip = false;\r\n\t\t\tthis.modify();\r\n\t\t\tthis.singleChatInitializeToBottom();\r\n\t\t},\r\n\t\t//quit the one to one chatroom\r\n\t\toutSingleChat() {\r\n\t\t\tthis.uname = '';\r\n\t\t\tthis.friendID = '';\r\n\t\t\tthis.friendID2 = '';\r\n\t\t\tthis.modify();\r\n\t\t},\r\n\t\t//one to one animation effect\r\n\t\tmodify() {\r\n\t\t\tthis.bb = !this.bb;\r\n\t\t\tif (this.bb) {\r\n\t\t\t\tthis.bg = 'block';\r\n\t\t\t} else {\r\n\t\t\t\tthis.bg = 'none';\r\n\t\t\t}\r\n\t\t\tvar animation = uni.createAnimation({\r\n\t\t\t\tduration: 400,\r\n\t\t\t\ttimingFunction: 'ease',\r\n\t\t\t})\r\n\t\t\tthis.animation = animation\r\n\t\t\tif (this.bb) {\r\n\t\t\t\tanimation.bottom(0).step()\r\n\r\n\t\t\t} else {\r\n\t\t\t\tanimation.bottom().step()\r\n\t\t\t}\r\n\t\t\tthis.animationData = animation.export()\r\n\t\t},\r\n\t\t// fetch the group chat messages from the server database\r\n\t\tfetchGroupChatMessages() {\r\n\t\t\tuni.request({\r\n\t\t\t\turl: BASE_URL + ':' + SERVER_PORT + `/groupchat?roomID=${this.roomID}`,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.groupChatMessages = res.data;\r\n\t\t\t\t\t// console.log(res.data);\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.error('Error fetching group chat messages:', err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tfetchSingleChatMessages() {\r\n\t\t\tuni.request({\r\n\t\t\t\turl: BASE_URL + ':' + SERVER_PORT + `/singlechat?roomID=${this.roomID}`,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.singlechat = res.data;\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.error('Error fetching group chat messages:', err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// fetchGroupChatMessages() {\r\n\t\t// \taxios.get(`http://129.12.211.74:30000/groupchat?roomID=${this.roomID}`)\r\n\t\t// \t\t.then((res) => {\r\n\t\t// \t\t\tthis.groupChatMessages = res.data;\r\n\t\t// \t\t})\r\n\t\t// \t\t.catch((err) => {\r\n\t\t// \t\t\tconsole.error('Error fetching group chat messages:', err);\r\n\t\t// \t\t});\r\n\t\t// },\r\n\t\t// fetchSingleChatMessages() {\r\n\t\t// \taxios.get(`http://129.12.211.74:30000/singlechat?roomID=${this.roomID}`)\r\n\t\t// \t\t.then((res) => {\r\n\t\t// \t\t\tthis.singlechat = res.data;\r\n\t\t// \t\t})\r\n\t\t// \t\t.catch((err) => {\r\n\t\t// \t\t\tconsole.error('Error fetching group chat messages:', err);\r\n\t\t// \t\t});\r\n\t\t// },\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.status-bar {\r\n\tposition: fixed;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 88rpx;\r\n\tpadding-top: var(--status-bar-height);\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -webkit-flex;\r\n\tdisplay: flex;\r\n\toverflow: hidden;\r\n\t-webkit-box-pack: justify;\r\n\t-webkit-justify-content: space-between;\r\n\tjustify-content: space-between;\r\n\tz-index: 998;\r\n\tcolor: #272832;\r\n\t-webkit-transition-property: all;\r\n\ttransition-property: all;\r\n\tbackground: rgba(255, 255, 255, 0.96);\r\n\r\n\t.login-c {\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tpadding-top: 22rpx;\r\n\t\tpadding-left: 32rpx;\r\n\t}\r\n\r\n\t.login-back {\r\n\t\twidth: 20rpx;\r\n\t\theight: 34rpx;\r\n\t}\r\n\r\n\t.scrollv {\r\n\t\twidth: 84%;\r\n\r\n\t\t.users {\r\n\t\t\t//background: #eee;\r\n\t\t\tdisplay: flex;\r\n\r\n\t\t\t.user-l {\r\n\t\t\t\tpadding: 12rpx 8rpx;\r\n\t\t\t\tposition: relative;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 64rpx;\r\n\t\t\t\t\theight: 64rpx;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.tip {\r\n\t\t\t\t\twidth: 14rpx;\r\n\t\t\t\t\theight: 14rpx;\r\n\t\t\t\t\tbackground: rgba(255, 77, 60, 1);\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\ttop: 12rpx;\r\n\t\t\t\t\tright: 10rpx;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\tz-index: 10;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.main {\r\n\tpadding: 160rpx 28rpx 160rpx;\r\n}\r\n\r\n.main,\r\n.modfiy-mian {\r\n\r\n\t.msg {\r\n\t\tdisplay: flex;\r\n\r\n\t\talign-items: flex-end;\r\n\t\tpadding: 40rpx 0;\r\n\r\n\t\timage {\r\n\t\t\tflex: none;\r\n\t\t\twidth: 64rpx;\r\n\t\t\theight: 64rpx;\r\n\t\t\tborder-radius: 18rpx;\r\n\t\t\tmargin: 0 20rpx;\r\n\r\n\t\t}\r\n\r\n\t\t.messageOverall {\r\n\t\t\t.messageContent {\r\n\t\t\t\tmax-width: 380rpx;\r\n\t\t\t\tpadding: 26rpx 32rpx;\r\n\t\t\t\tmin-height: 48rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: rgba(25, 29, 35, 1);\r\n\t\t\t\tline-height: 40rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.messageTime {\r\n\t\t\t\tpadding-top: 8rpx;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tcolor: rgba(25, 29, 35, 0.5);\r\n\t\t\t\tline-height: 34rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.left {\r\n\t\tflex-direction: row;\r\n\r\n\t\t.messageContent {\r\n\t\t\tbackground: rgba(244, 244, 244, 1);\r\n\t\t\tborder-radius: 24rpx 24rpx 24rpx 0px;\r\n\t\t\toverflow: auto;\r\n\t\t\tword-wrap: break-word;\r\n\t\t}\r\n\t}\r\n\r\n\t.right {\r\n\t\tflex-direction: row-reverse;\r\n\r\n\t\t.messageContent {\r\n\t\t\tbackground: rgba(200, 255, 200, 1);\r\n\t\t\tborder-radius: 24rpx 24rpx 0px 24rpx;\r\n\t\t\toverflow: auto;\r\n\t\t\tword-wrap: break-word;\r\n\t\t}\r\n\r\n\t\t.messageTime {\r\n\t\t\tright: 132rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.center {\r\n\t\ttext-align: center;\r\n\t\tpadding: 32rpx 0 20rpx;\r\n\r\n\t\t.inner {\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tcolor: rgba(25, 29, 35, 0.5);\r\n\t\t\tline-height: 34rpx;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.send {\r\n\tposition: fixed;\r\n\tz-index: 1002;\r\n\tbottom: 0;\r\n\twidth: 100%;\r\n\r\n\tpadding-bottom: var(--status-bar-height);\r\n\tmin-height: 100rpx;\r\n\tbackground: rgba(255, 255, 255, 0.96);\r\n\tdisplay: flex;\r\n\r\n\t.chat-send {\r\n\t\tmargin: 12rpx 48rpx 12rpx 0rpx;\r\n\r\n\t\tflex: 1;\r\n\t\twidth: 100%;\r\n\t\tmin-height: 40rpx;\r\n\t\tbackground: rgba(242, 242, 242, 1);\r\n\t\tborder-radius: 24rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: rgba(25, 29, 35, 1);\r\n\t\tline-height: 40rpx;\r\n\t\tpadding: 24rpx 80rpx 24rpx 24rpx;\r\n\t}\r\n\r\n\t.send-img {\r\n\t\twidth: 48rpx;\r\n\t\theight: 48rpx;\r\n\t\tposition: absolute;\r\n\t\tright: 68rpx;\r\n\t\ttop: 32rpx;\r\n\t}\r\n\r\n\t.send-in {\r\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\t\tpadding-left: 48rpx;\r\n\r\n\t\t.emoji-img {\r\n\t\t\twidth: 48rpx;\r\n\t\t\theight: 48rpx;\r\n\t\t\tbackground: rgba(242, 242, 242, 1);\r\n\t\t\tpadding: 10px;\r\n\t\t\tborder-radius: 24rpx;\r\n\t\t\tmargin: 12rpx 16rpx 12rpx 0rpx;\r\n\t\t\t// display: none;\r\n\t\t}\r\n\r\n\t\t.gpt-img {\r\n\t\t\twidth: 48rpx;\r\n\t\t\theight: 48rpx;\r\n\t\t\tbackground: rgba(242, 242, 242, 1);\r\n\t\t\tpadding: 10px;\r\n\t\t\tborder-radius: 24rpx;\r\n\t\t\tmargin: 12rpx 16rpx 12rpx 0rpx;\r\n\t\t\t// display: none;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.modify {\r\n\tposition: fixed;\r\n\toverflow: hidden;\r\n\tleft: 0;\r\n\tbottom: -90%;\r\n\twidth: 100%;\r\n\theight: 90%;\r\n\tz-index: 1000;\r\n\tbackground: #fff;\r\n\tborder-radius: 48rpx 48rpx 0px 0px;\r\n}\r\n\r\n.u-name {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tbackground-color: #fff;\r\n\theight: 80rpx;\r\n\ttext-align: center;\r\n\twidth: 100%;\r\n\tline-height: 80rpx;\r\n}\r\n\r\n.modfiy-mian {\r\n\tpadding: 88rpx 28rpx 120rpx;\r\n\tbox-sizing: border-box;\r\n\theight: 100%;\r\n}\r\n\r\n.bg {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tz-index: 999;\r\n\tbackground-color: rgba(0, 0, 0, 0.4);\r\n}\r\n\r\n.join {\r\n\tmargin-top: 180rpx;\r\n\twidth: 200rpx;\r\n\theight: 200rpx;\r\n\tbackground: rgba(255, 131, 60, 1);\r\n\tbox-shadow: 0px 36rpx 68rpx -8rpx rgba(255, 131, 60, 0.5);\r\n\tborder-radius: 50%;\r\n\tfont-size: 28rpx;\r\n\tfont-weight: 600;\r\n\ttext-align: center;\r\n\tline-height: 200rpx;\r\n\tcolor: rgba(255, 255, 255, 1);\r\n}\r\n\r\n.emoji-display {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 210px;\r\n\tbackground-color: white;\r\n\ttop: -210px;\r\n\tleft: 0;\r\n\toverflow-y: auto;\r\n\r\n\tul {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tlist-style: none;\r\n\r\n\t\tli {\r\n\t\t\tpadding: 2px 3px;\r\n\t\t\tfont-size: 2.2rem;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chatroom.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1691937668509\n      var cssReload = require(\"C:/Users/24416/Documents/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}